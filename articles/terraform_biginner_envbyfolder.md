---
title: "ãƒ•ã‚©ãƒ«ãƒ€ã§è¤‡æ•°ç’°å¢ƒç®¡ç†ï¼ˆã‚¨ãƒƒã‚»ãƒ³ã‚¹ç·¨ï¼‰ - Terraformã®ãã»ã‚“ã¨å¿œç”¨"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["terraform", "åˆå¿ƒè€…"]
published: true
---
ã¦ã„ã­ã„ã‚’å¿ƒæ›ã‘ãŸTerraformè¨˜äº‹ã§ã™ã€‚ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæº€è¼‰ã§ã‚„ã£ãŸæ°—ã«ãªã‚Œã¾ã™ã€‚
Terraformã¨ã„ãˆã°ã‚¯ãƒ©ã‚¦ãƒ‰ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆã§ã™ãŒã€ã“ã®è¨˜äº‹ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«PCä¸Šã®ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã§æ¸ˆã‚€ã‚ˆã†ã«å·¥å¤«ã—ã¦ã„ã¾ã™ã€‚
Terraformé–¢é€£ã®ä»–ã®è¨˜äº‹ã¯ã€Œ[Terraformã®ãã»ã‚“ã¨å¿œç”¨](https://zenn.dev/sway/articles/terraform_index_list)ã€ã‹ã‚‰ã©ã†ãã€‚

# æ¦‚è¦
Terraformã§æ‚©ã‚€ã®ãŒç’°å¢ƒã®ç®¡ç†æ–¹æ³•ã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚’é–‹ç™ºã™ã‚‹å ´åˆã«æœ¬ç•ªç’°å¢ƒã®ã¿ã¨ã„ã†ã“ã¨ã¯éå¸¸ã«ç¨€ã§ã€é–‹ç™ºç’°å¢ƒã‚„ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒãªã©ã®è¤‡æ•°ã®ç’°å¢ƒã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã™ã€‚
è¤‡æ•°ã®ç’°å¢ƒã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã¨ã—ã¦æœ€ã‚‚ãƒ¡ã‚¸ãƒ£ãƒ¼ãªã®ãŒã€ç’°å¢ƒã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚ã‘ã‚‹æ–¹æ³•ã§ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½¿ã£ãŸè¤‡æ•°ç’°å¢ƒç®¡ç†ã®ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚
ä»–ã®è¨˜äº‹ã¨åŒæ§˜ã«ãƒ­ãƒ¼ã‚«ãƒ«PCä¸Šã§å®Œçµã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚ã‚ˆã‚Šå®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ã¯åˆ¥ã®è¨˜äº‹ï¼ˆèª æ„ä½œæˆä¸­ï¼‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# ã‚´ãƒ¼ãƒ«
é–‹ç™ºã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã€æœ¬ç•ªã®3ã¤ã®ç’°å¢ƒã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚
![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_goal.jpg)

# å¿…è¦ãªã‚‚ã®
- ä½œæ¥­æ™‚é–“ï¼š15åˆ†
- Terraformã‚’å®Ÿè¡Œã§ãã‚‹ç’°å¢ƒ
- å¤‰æ•°ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç†è§£
   :::message
   å¤‰æ•°ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«è‡ªä¿¡ã®ãªã„æ–¹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’ã©ã†ãã€‚
   - [å¤‰æ•°ã®ä½¿ã„æ–¹](https://zenn.dev/sway/articles/terraform_biginner_varliable)
   - [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½¿ã„æ–¹](https://zenn.dev/sway/articles/terraform_biginner_modules)
   :::

# ç‰¹å¾´
## èª¬æ˜
ç’°å¢ƒã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã‚’ç’°å¢ƒã”ã¨ã«ä½œæˆã—ã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã€ç’°å¢ƒãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å‚ç…§ã—ã¾ã™ã€‚
ã“ã®ã‚ˆã†ãªæ§‹æˆã¨ã™ã‚‹ã“ã¨ã§ç’°å¢ƒã”ã¨ã®é•ã„ã‚’ç®¡ç†ã—ã¤ã¤ã€ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã‚’å…±é€šåŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã‚½ãƒ¼ã‚¹é…ç½®ã‚¤ãƒ¡ãƒ¼ã‚¸
ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã¨ã‚½ãƒ¼ã‚¹é…ç½®ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
```
terraform/
 â”œâ”€â”€â”€ envs/
 â”‚    â”œâ”€â”€â”€ develop/
 â”‚    â”‚    â”œâ”€ main.tf
 â”‚    â”‚    â””â”€ setting.tf
 â”‚    â”œâ”€â”€â”€ staging/
 â”‚    â”‚    â”œâ”€ main.tf
 â”‚    â”‚    â””â”€ setting.tf
 â”‚    â””â”€â”€â”€ production/
 â”‚    â”‚    â”œâ”€ main.tf
 â”‚    â”‚    â””â”€ setting.tf
 â””â”€â”€â”€ modules/
      â””â”€â”€â”€ hello/
           â””â”€ helloworld.tf
```

## ç’°å¢ƒã”ã¨ã®ã‚½ãƒ¼ã‚¹ã®ä¾‹
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç’°å¢ƒã”ã¨ã«ä½œæˆã—ã¾ã™ã€‚
```hcl:envs/develop/setting.tf
locals {
  file = {
    content  = "hello world in develop!"
    filename = "../../output/develop/develop.txt"
  }
}
```
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã¯ç’°å¢ƒã”ã¨ã«å®šç¾©ã—ã¾ã™ã€‚å†—é•·ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ãŒã€ç‰¹å®šã®ç’°å¢ƒã«ã®ã¿å­˜åœ¨ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãªã©ã®ç®¡ç†ã‚‚è¡Œã„ã‚„ã™ããªã‚Šã¾ã™ã€‚
```hcl:envs/develop/main.tf
module "develop_main" {
  source   = "../../modules/hello"
  content  = local.file.content
  filename = local.file.filename
}
```

## ã¾ã¨ã‚
- è¨­å®šã¯ç’°å¢ƒã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚ã‘ã¦å€‹åˆ¥ã«ä½œã‚‹
- ãƒªã‚½ãƒ¼ã‚¹ã®å®šç¾©ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã—ã¦å…±é€šåŒ–ã™ã‚‹
- ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã§ã©ã®ã‚ˆã†ãªç’°å¢ƒãŒã‚ã‚‹ã‹ã‚ã‹ã‚‹
- ç’°å¢ƒãƒ•ã‚©ãƒ«ãƒ€ã®ã‚½ãƒ¼ã‚¹å·®åˆ†ã‚’è¦‹ã‚‹ã“ã¨ã§é•ã„ã‚’æ¯”è¼ƒã—ã‚„ã™ã„

# ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹å®Ÿæ¼”

1. ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
   ã“ã®è¨˜äº‹ã§ä½¿ç”¨ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯githubä¸Šã«å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
   @[card](https://github.com/sway11466/zenn/tree/main/sample_codes/terraform_biginner_envbyfolder)

1. é–‹ç™ºç’°å¢ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   é–‹ç™ºç’°å¢ƒã¯output/develop/develop.txtã‚’ä½œæˆã™ã‚‹è¨­å®šã«ã—ã¾ã™ã€‚
   ```hcl:envs/develop/setting.tf
   locals {
     file = {
       content  = "hello world in develop!"
       filename = "../../output/develop/develop.txt"
     }
   }
   ```
   ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ç™ºãƒ•ã‚©ãƒ«ãƒ€ã«å¤‰æ›´ã—ã¦initã€applyã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
   ```bash
   cd envs\develop
   terraform.exe init
   terraform.exe apply
   ```
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_01.jpg)
   è¨­å®šé€šã‚Šã«output/develop/develop.txtãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_02.jpg)
   ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚‚æŒ‡å®šã®é€šã‚Šã§ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_03.jpg)

1. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   åŒã˜ã‚ˆã†ã«ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ä½œæˆã—ã¾ã™ã€‚
   ```bash
   cd ..\staging
   terraform.exe init
   terraform.exe apply
   ```
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_04.jpg)
   è¨­å®šé€šã‚Šã«output/staging/staging.txtãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_05.jpg)
   ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚‚æŒ‡å®šã®é€šã‚Šã§ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_06.jpg)

1. æœ¬ç•ªç’°å¢ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   æœ¬ç•ªç’°å¢ƒã‚‚åŒæ§˜ã§ã™ã€‚
   ```bash
   cd ..\production
   terraform.exe init
   terraform.exe apply
   ```
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_07.jpg)
   è¨­å®šé€šã‚Šã«output/production/production.txtãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_08.jpg)
   ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚‚æŒ‡å®šã®é€šã‚Šã§ã™ã€‚
   ![goal](/images/terraform_biginner_envbyfolder/terraform_biginner_envbyfolder_tutorial_09.jpg)

# æ„Ÿæƒ³
ã“ã®è¨˜äº‹ã§èª¬æ˜ã™ã‚‹ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆãŒã€ã„ã¡ã°ã‚“ã‚ªãƒ¼ã‚½ãƒ‰ãƒƒã‚¯ã‚¹ã§å®Ÿè·µçš„ãªTrraformã®ä½¿ã„æ–¹ã ã¨æ€ã„ã¾ã™ã€‚ã‚¤ãƒ³ãƒ•ãƒ©è‚²ã¡ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«æ…£ã‚Œã¦ã„ãªã„ãƒ¡ãƒ³ãƒãƒ¼ãŒTerraformã‚’ä½¿ã„å§‹ã‚ãŸå ´åˆã¯ã€ã“ã®ç®¡ç†æ–¹æ³•ã‚’è–¦ã‚ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

# æ¬¡ã¯ã“ã‚Œã‚’ã‚„ã‚ã†
1. ãƒ•ã‚©ãƒ«ãƒ€ã§è¤‡æ•°ç’°å¢ƒç®¡ç†ï¼ˆå®Ÿè·µç·¨ï¼‰
1. ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä½¿ã„æ–¹(é‹­æ„ä½œæˆä¸­)

Terraformé–¢é€£ã®ä»–ã®è¨˜äº‹ã¯ã€Œ[Terraformã®ãã»ã‚“ã¨å¿œç”¨](https://zenn.dev/sway/articles/terraform_index_list)ã€ã‹ã‚‰ã©ã†ãã€‚
